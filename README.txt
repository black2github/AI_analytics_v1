## âœ… ÐŸÐ¾Ð»Ð½Ñ‹Ðµ Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð¸Ñ Ðº ÐºÐ°Ð¶Ð´Ð¾Ð¼Ñƒ Ñ„Ð°Ð¹Ð»Ñƒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### 1. `main.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð² FastAPI-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.

* ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹:

  * `/analyze`: Ð°Ð½Ð°Ð»Ð¸Ð· Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ RAG-Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ¸.
  * `/load/platform`: Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ñ‹Ñ… Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹.
  * `/load/service`: Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ ÑÐµÑ€Ð²Ð¸ÑÐ° Ð¿Ð¾ ÑÐ¿Ð¸ÑÐºÑƒ Confluence ID.
* Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸Ð· `rag_pipeline`, `embedding_store`, `confluence_loader`.
* Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ `uvicorn` Ð² Docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ.

---

### 2. `config.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹.

* Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ: API-ÐºÐ»ÑŽÑ‡Ð¸, Ð±Ð°Ð·Ñƒ Chroma, Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ URL.
* Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ð¼ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ (`gpt`, `claude`), Ð¿ÑƒÑ‚ÑÐ¼Ð¸ Ðº Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ñ‹Ð¼ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸ÑÐ¼ Ð¸ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼Ð¸ Confluence.

---

### 3. `models.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Pydantic-Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð´Ð»Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð².

* ÐžÐ¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð¼Ð¾Ð´ÐµÐ»Ð¸:

  * `AnalyzeRequest`
  * `AnalyzeResponse`
  * `LoadServiceRequest`
* ÐžÐ±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°ÐµÑ‚ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸ÑŽ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð²Ñ‹Ñ…Ð¾Ð´.

---

### 4. `embedding_store.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑÐ¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ð°Ð¼Ð¸ Ð¸ Chroma-Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰ÐµÐ¼.

* Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐ¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ð¾Ð² Ñ‡ÐµÑ€ÐµÐ· OpenAI (`text-embedding-ada-002`).
* Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¸ Ð¿ÐµÑ€ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚ÑŒ Chroma (Ð² `./chroma_db`).
* Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ:

  * ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼ÐµÐ½Ð½Ñ‹Ñ… Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹.
  * Ð¡ÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ñ… Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ (Ð² Ñ‚Ð¾Ð¼ Ñ‡Ð¸ÑÐ»Ðµ Ñ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð¼ `namespace`).
* ÐŸÐ¾Ð¸ÑÐº Ñ‚Ð¾Ð¿-N Ð¿Ð¾Ñ…Ð¾Ð¶Ð¸Ñ… Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð¿Ð¾ ÑÐ¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ñƒ.

---

### 5. `confluence_loader.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Confluence API.

* ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ† Ð¿Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¼ ID (Ñ‡ÐµÑ€ÐµÐ· Basic Auth Ð¸Ð»Ð¸ Token).
* Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:

  * Ñ‡Ð¸ÑÑ‚Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹
  * Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð¸ Ð¼ÐµÑ‚Ð°Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ
* Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² `main.py` Ð¸ `embedding_store.py` Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ñ… Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹.

---

### 6. `llm_clients.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð£Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ðº LLM (OpenAI, Claude).

* ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¿Ð¾ Ð¸Ð¼ÐµÐ½Ð¸ (`gpt`, `claude`).
* Ð¡Ñ‚Ñ€Ð¾Ð¸Ñ‚ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚.
* Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð· Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ ÑƒÑ‡ÐµÑ‚Ð¾Ð¼ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð°.
* Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¸Ð· `rag_pipeline.py`.

---

### 7. `rag_pipeline.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: LangChain Retrieval-Augmented Generation (RAG) Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ°.

* Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ LangChain RetrievalQA Ñ:

  * `Chroma` ÐºÐ°Ðº retriever
  * OpenAI Ð¸Ð»Ð¸ Anthropic LLM ÐºÐ°Ðº Ð³ÐµÐ½ÐµÑ€Ð°Ñ‚Ð¾Ñ€
* ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ RAG-Ð¿Ñ€Ð¾Ñ†ÐµÑÑ: ÑÐ±Ð¾Ñ€ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ð° + Ð°Ð½Ð°Ð»Ð¸Ð·.
* Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ðµ `/analyze`.

---

### 8. `__init__.py`

> **ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ**: Ð”ÐµÐ»Ð°ÐµÑ‚ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ `app/` ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¼ Python-Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¼.

* Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ `pass` Ð¸Ð»Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹.
* Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð¿Ð°ÐºÐµÑ‚Ð°.

---

## ðŸ”— Ð”Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Ð¼ÐµÐ¶Ð´Ñƒ Ð¼Ð¾Ð´ÑƒÐ»ÑÐ¼Ð¸

```plaintext
                           +-------------------+
                           |     config.py     |
                           +---------+---------+
                                     |
                                     v
+------------------+      +----------+-----------+        +-------------------+
|  main.py         +----->+  embedding_store.py  +<-------+ confluence_loader |
+--------+---------+      +----------+-----------+        +-------------------+
         |                           |
         |                           v
         |                  +--------+--------+
         |                  |   rag_pipeline  +<----+
         |                  +--------+--------+     |
         |                           |              |
         v                           v              |
+--------+---------+       +---------+--------+     |
|     models.py    |       |   llm_clients.py |<----+
+------------------+       +------------------+
```

---

## ðŸ§© Ð ÐµÐ·ÑŽÐ¼Ðµ

| ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ                              | Ð¤Ð°Ð¹Ð»Ñ‹                               |
| -------------------------------------- | ----------------------------------- |
| **API-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ**                      | `main.py`, `models.py`              |
| **ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ**                       | `config.py`                         |
| **Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑÐ¼Ð±ÐµÐ´Ð´Ð¸Ð½Ð³Ð°Ð¼Ð¸ Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰ÐµÐ¼** | `embedding_store.py`, `chroma_db/`  |
| **Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Confluence**            | `confluence_loader.py`              |
| **LLM-Ð°Ð½Ð°Ð»Ð¸Ð·**                         | `llm_clients.py`, `rag_pipeline.py` |
| **ÐŸÐ°ÐºÐµÑ‚ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸**                | `__init__.py`                       |

